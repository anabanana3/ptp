<div *ngIf="error">
  <app-error></app-error>
</div>
<div *ngIf="!error">
  <div *ngIf="asociacion">
    <app-header-asociacion></app-header-asociacion>
  </div>
  <div *ngIf="admin">
    <app-header-admin></app-header-admin>
  </div>
  <div *ngIf="usuario">
    <app-header></app-header>
  </div>

  <div class="gridVerExp">
    <div class="infoExp">
      <button class="btn-relleno" [routerLink]="['/bibexpedientes',{back:1}]">Volver</button>
      <div style="padding-left:15px" *ngFor="let e of expediente">
        <h2 class="cherry textleft">INFORMACIÓN BÁSICA DEL EXPEDIENTE</h2>
        <div class="divLabelsVer">
          <div class="divExpVer">
            <label><b>Título</b></label>
          </div>
          <div class="divExpVer">
            <p>{{e.Titulo}}</p>
          </div>
        </div>
        <div class="divLabelsVer">
          <div class="divExpVer">
            <label><b>Descripción</b></label>
          </div>
          <div class="divExpVer">
            <!-- <p>{{e.Descripcion.split("'")[1]}}</p> -->
            <p>{{e.Descripcion}}</p>
          </div>
        </div>
        <div class="divLabelsVer">
          <div class="divExpVer">
            <label><b>Lugar de detección</b></label>
          </div>
          <div class="divExpVer">
            <p>{{e.Nombre}}</p>
          </div>
        </div>
        <div class="divLabelsVer">
          <div class="divExpVer">
            <label><b>Fecha de detección</b></label>
          </div>
          <div class="divExpVer">
            <p>{{e.Fecha.split("T")[0]}}</p>
          </div>
        </div>
        <div class="divLabelsVer">
          <div class="divExpVer">
            <label><b>Autor</b></label>
          </div>
          <div class="divExpVer">
            <p>{{e.Autor.split("'")[1]}}</p>
          </div>
        </div>

      </div>

      <div class="permisosVerExp">
        <input class="checktrans" (click)="mostrarComentarios()" type="checkbox" name="publicar" id="publicar" [disabled]="estaCheck">
        <label class="labeltrans" for="publicar" id="disabled">{{labelPublico}}</label>
        <div *ngIf="coment==1" class="coment" id="coment">
          <input class="checktrans" type="checkbox" name="comentarios" id="comentarios" (click)="permitirComent()" [checked]="estaComent">
          <label class="labeltrans" for="comentarios">Permitir comentarios</label>
        </div>
      </div>

      <div class="lineaDiv"></div>

    <div *ngIf="estaComent" class="sliderComentarios" id="sliderComentarios">
      <a name="arriba"></a>
      <div id="alert">{{mensaje}}</div>
      <div class="comentario comentarioNuevo">
        <h2>Nuevo comentario</h2>
        <textarea
          [(ngModel)]='comentario' type="text" id="comentario"
          placeholder="Escriba su comentario aquí...">
        </textarea>
        <div>
          <button type="submit" name="button" class="btn-border" (click)="comentar()">Comentar</button>
        </div>
      </div>

      <div style="width:100%;" *ngFor="let comentario of comentarios">
        <div class="comentario">
          <div class="comentarioTitulo">
            <h3>{{comentario.Nombre.split("'")[1]}} - {{comentario.Fecha.split("T")[0]}}</h3>
            <button *ngIf="comentario.ID_Usuario == sessionStorageID"type="submit" name="button" class="btn span icon-trash-empty"
              (click)="borrarComentario(comentario.ID_Comentario)"></button>
          </div>
          <p>{{comentario.Comentario.split("'")[1]}}</p>
        </div>
      </div>
      <!-- PAGINACION -->
      <ul class="pagination" *ngIf="paginas.length >1">
      <!--Boton de pagina anterior-->
        <li>
          <a (click)="pasarPagina(pagBack)">
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
        <li *ngFor="let pag of paginas; let i=index">
          <a (click)="pasarPagina(i+1)">
            <span *ngIf="(i+1)==pagActual" class="active">{{i+1}}</span>
            <span *ngIf="(i+1)!=pagActual" >{{i+1}}</span>
          </a>
        </li>
        <!--Boton de pagina siguiente-->
        <li>
          <a (click)="pasarPagina(pagNext);">
            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
      </ul>
    </div>
  </div>


    <div class="datosExp">
      <div class="divBlancoVerExp">
        <mat-tab-group>

          <mat-tab label="Datos sociodemográficos">
            <div class="contentVerExp">
            <h2 class="cherry">DATOS SOCIODEMOGRÁFICOS</h2>
            <h2 class="text16 textPink perfilForm">DATOS SOBRE EL TITULAR DEL EXPEDIENTE</h2>
              <div *ngFor="let p of persona" class="persona">
                <div class="divLabelsVerExp">
                  <div class="divExpDeUno">
                    <label>Edad:</label>
                  </div>
                  <div class="divExpDeUno">
                    <label>{{p.Edad}}</label>
                  </div>
                </div>
                <div class="divLabelsVerExp">
                  <div class="divExpDeUno">
                    <label>Etnia de origen:</label>
                  </div>
                  <div class="divExpDeUno">
                      <label>{{p.Etnia}}</label>
                  </div>
                </div>
                <div class="divLabelsVerExp">
                  <div class="divExpDeUno">
                      <label>Lugar de nacimiento:</label>
                  </div>
                  <div class="divExpDeUno">
                      <label>{{p.Sitio}}, {{p.Pais}}</label>
                  </div>
                </div>
                <div class="divLabelsVerExp">
                  <div class="divExpDeUno">
                    <label *ngIf="p.Actividad != NULL">Actividad Laboral:</label>
                  </div>
                  <div class="divExpDeUno">
                    <label>{{p.Actividad}}</label>
                  </div>
                </div>
              </div>
            <h2 class="text16 textPink perfilForm">DATOS SOBRE EL PADRE</h2>
            <div *ngFor="let p of padre" class="padre">
              <div class="divLabelsVerExp">
                <div class="divExpDeUno">
                  <label>Edad:</label>
                </div>
                <div class="divExpDeUno">
                  <label>{{p.Edad}}</label>
                </div>
              </div>
              <div class="divLabelsVerExp">
                <div class="divExpDeUno">
                  <label *ngIf="p.Actividad != NULL">Actividad Laboral:</label>
                </div>
                <div class="divExpDeUno">
                  <label>{{p.Actividad}}</label>
                </div>
              </div>
              <div class="divLabelsVerExp">
                <div class="divExpDeUno">
                  <label>Etnia de origen:</label>
                </div>
                <div class="divExpDeUno">
                    <label>{{p.Etnia}}</label>
                </div>
              </div>
              <div class="divLabelsVerExp">
                <div class="divExpDeUno">
                  <label>Lugar de nacimiento:</label>
                </div>
                <div class="divExpDeUno">
                  <label>{{p.ID_Lugar.split("'")[1]}}</label>
                </div>
              </div>

            </div>
            <div *ngIf="!padre?.length" class="padre textleft">
              <label>No hay datos registrados</label>
            </div>

            <h2 class="text16 textPink perfilForm">DATOS SOBRE LA MADRE</h2>
            <div *ngFor="let m of madre" class="madre">
              <div class="divLabelsVerExp">
                <div class="divExpDeUno">
                  <label>Edad:</label>
                </div>
                <div class="divExpDeUno">
                  <label>{{m.Edad}}</label>
                </div>
              </div>
              <div class="divLabelsVerExp">
                <div class="divExpDeUno">
                  <label *ngIf="m.Actividad != NULL">Actividad Laboral:</label>
                </div>
                <div class="divExpDeUno">
                    <label>{{m.Actividad}}</label>
                  </div>
                </div>
                <div class="divLabelsVerExp">
                  <div class="divExpDeUno">
                    <label>Etnia de origen:</label>
                  </div>
                  <div class="divExpDeUno">
                    <label>{{m.Etnia}}</label>
                  </div>
                </div>
                <div class="divLabelsVerExp">
                  <div class="divExpDeUno">
                    <label>Lugar de nacimiento:</label>
                  </div>
                  <div class="divExpDeUno">
                    <label>{{m.ID_Lugar.split("'")[1]}}</label>
                  </div>
                </div>
              </div>
              <div *ngIf="!madre?.length" class="madre textleft">
                <label>No hay datos registrados</label>
              </div>

              <h2 class="cherry">CONTEXTO DE LA CITA</h2>
              <h2 class="text16 textPink perfilForm">TIPO DE CITA</h2>

            <div *ngFor="let k of bloque1" class="bloque1">
              <div class="divLabelsVerExp">
                <div class="divExpDeUno">
                  <label>Citación por abordaje de riesgo de la MGF:</label>
                </div>

                <div class="divExpDeUno">
                  <label *ngIf="k.Citacion == 1">Sí</label>
                  <label *ngIf="k.Citacion == 0">No</label>
                </div>
              </div>

              <div class="divLabelsVerExp">
                <div class="divExpDeUno">
                  <label>Derivación por detección de riesgo de MGF:</label>
                </div>

                <div class="divExpDeUno">
                  <label *ngIf="k.Deriv_Riesgo == 1">Sí</label>
                  <label *ngIf="k.Deriv_Riesgo == 0">No</label>
                </div>
              </div>

              <div class="divLabelsVerExp">
                <div class="divExpDeUno">
                  <label>Derivación por sospecha de MGF:</label>
                </div>

                <div class="divExpDeUno">
                  <label *ngIf="k.Deriv_Sospecha == 1">Sí</label>
                  <label *ngIf="k.Deriv_Sospecha == 0">No</label>
                </div>
              </div>

              <div *ngIf="k.Otros != 'NULL'">
                <div class="divLabelsVerExp">
                  <div class="divExpDeUno">
                    <label>Otros motivos:</label>
                  </div>
                  <div class="divExpDeUno">
                    <label>{{k.Otros}}</label>
                  </div>
                </div>
              </div>

              <h2 class="text16 textPink perfilForm">PERSONAS DURANTE LA CITA</h2>
              <div class="divLabelsVerExp">
                <div class="divExpDeUno">
                  <label>Acompañada por la madre:</label>
                </div>
                <div class="divExpDeUno">
                  <label *ngIf="k.Acomp_M == 1">Sí</label>
                  <label *ngIf="k.Acomp_M == 0">No</label>
                </div>
              </div>

              <div class="divLabelsVerExp">
                <div class="divExpDeUno">
                  <label>Acompañada por el padre:</label>
                </div>
                <div class="divExpDeUno">
                  <label *ngIf="k.Acomp_P == 1">Sí</label>
                  <label *ngIf="k.Acomp_P == 0">No</label>
                </div>
              </div>

              <div class="divLabelsVerExp">
                <div class="divExpDeUno">
                  <label>Acompañada por hermano/a:</label>
                </div>
                <div class="divExpDeUno">
                  <label *ngIf="k.Acomp_H == 1">Sí</label>
                  <label *ngIf="k.Acomp_H == 0">No</label>
                </div>
              </div>

              <div *ngIf="k.Acomp_O != 'NULL'">
                <div class="divLabelsVerExp">
                  <div class="divExpDeUno">
                    <label>Acompañado por otros:</label>
                  </div>
                  <div class="divExpDeUno">
                    <label>{{k.Acomp_O}}</label>
                  </div>
                </div>
              </div>

              <h2 class="text16 textPink perfilForm">DIFICULTAD CON EL IDIOMA</h2>
              <div class="divLabelsVerExp">
                <div class="divExpDeUno">
                  <label>Dificultad con el idioma materno:</label>
                </div>
                <div class="divExpDeUno">
                  <label *ngIf="k.Dif_Idi_M == 1">Sí</label>
                  <label *ngIf="k.Dif_Idi_M == 0">No</label>
                </div>
              </div>

              <div class="divLabelsVerExp">
                <div class="divExpDeUno">
                  <label>Precisa traducción:</label>
                </div>
                <div class="divExpDeUno">
                  <label *ngIf="k.Traduccion == 1">Sí</label>
                  <label *ngIf="k.Traduccion == 0">No</label>
                </div>
              </div>

              <div class="divLabelsVerExp">
                <div class="divExpDeUno">
                  <label>Precisa mediación intercultural::</label>
                </div>
                <div class="divExpDeUno">
                  <label *ngIf="k.Mediacion == 1">Sí</label>
                  <label *ngIf="k.Mediacion == 0">No</label>
                </div>
              </div>

              <div *ngIf="curso != 'NULL'">
                <div class="divLabelsVerExp">
                  <div class="divExpDeUno">
                    <label>Curso de la menor:</label>
                  </div>
                  <div class="divExpDeUno">
                    <label>{{k.Curso}}</label>
                  </div>
                </div>
              </div>

              <div *ngIf="centro_Salud != 'NULL'">
                <div class="divLabelsVerExp">
                  <div class="divExpDeUno">
                    <label>Centro de salud de la menor:</label>
                  </div>
                  <div class="divExpDeUno">
                    <label>{{k.Centro_Salud}}</label>
                  </div>
                </div>
              </div>

            </div>
          </div>
          </mat-tab>
          <mat-tab label="Acerca de MGF">
            <div class="contentVerExp">
            <div *ngIf="bloque2.length != 0">
              <h2 class="cherry">CONOCIMIENTO E INFORMACIÓN SOBRE LA MGF</h2>

              <div class="divLabelsVerExp">
                <div class="divExpDeUno">
                  <label>El implicado tiene conocimientos sobre la MGF:</label>
                </div>
                <div class="divExpDeUno">
                  <label *ngIf="bloque2[0].Conoce_MGF == 1">Sí</label>
                  <label *ngIf="bloque2[0].Conoce_MGF == 0">No</label>
                </div>
              </div>

              <div class="divLabelsVerExp">
                <div class="divExpDeUno">
                  <label>La MGF se realiza en la comunidad de origen:</label>
                </div>
                <div class="divExpDeUno">
                  <label *ngIf="bloque2[0].MGF_realizada_com_origen == 1">Sí</label>
                  <label *ngIf="bloque2[0].MGF_realizada_com_origen == 0">No</label>
                </div>
              </div>

              <div *ngIf="bloque2[0].Pos_padre != NULL">
                <div class="divLabelsVerExp">
                  <div class="divExpDeUno">
                    <label>Posicionamiento del padre frente a la MGF:</label>
                  </div>
                  <div class="divExpDeUno">
                    <label *ngIf="bloque2[0].Pos_padre == 1">A favor</label>
                    <label *ngIf="bloque2[0].Pos_padre == 0">En contra</label>
                  </div>
                </div>
              </div>

              <div *ngIf="bloque2[0].Pos_madre != NULL">
                <div class="divLabelsVerExp">
                  <div class="divExpDeUno">
                    <label>Posicionamiento de la madre frente a la MGF:</label>
                  </div>
                  <div class="divExpDeUno">
                    <label *ngIf="bloque2[0].Pos_madre == 1">A favor</label>
                    <label *ngIf="bloque2[0].Pos_madre == 0">En contra</label>
                  </div>
                </div>
              </div>

              <div *ngIf="bloque2[0].Pos_familia != NULL">
                <div class="divLabelsVerExp">
                  <div class="divExpDeUno">
                    <label>Posicionamiento de la familia en el pais de origen:</label>
                  </div>
                  <div class="divExpDeUno">
                    <label *ngIf="bloque2[0].Pos_familia == 1">A favor</label>
                    <label *ngIf="bloque2[0].Pos_familia == 0">En contra</label>
                  </div>
                </div>
              </div>

              <div *ngIf="b2Otros != ''">
                <div class="divLabelsVerExp">
                  <div class="divExpDeUno">
                    <label>Otros aspectos a tener en cuenta sobre el posicionamiento de la familia:</label>
                  </div>
                  <div class="divExpDeUno">
                    <label>{{b2Otros}}</label>
                  </div>
                </div>
              </div>

              <div *ngIf="bloque2[0].Sintomas_MGF != 'NULL'">
                <div class="divLabelsVerExp">
                  <div class="divExpDeUno">
                    <label>Significado de la MGF para el implicado en el expediente:</label>
                  </div>
                  <div class="divExpDeUno">
                    <label>{{bloque2[0].Sintomas_MGF}}</label>
                  </div>
                </div>
              </div>

              <div class="divLabelsVerExp">
                <div class="divExpDeUno">
                  <label>Número de partos</label>
                </div>
                <div class="divExpDeUno">
                  <label>{{bloque2[0].Num_Partos}}</label>
                </div>
              </div>

              <button mat-raised-button *ngIf="bloque2[0].Num_Partos != 0" (click)="openDialog()" type="submit" name="button" class="btn-border bgColorPink">Ver Partos</button>

            </div>
            <div *ngIf="bloque2.length == 0">
              <h3>No hay datos :(</h3>
            </div>
          </div>
          </mat-tab>
          <mat-tab label="Experiencias con la titular">
            <div class="contentVerExp">
            <div *ngFor="let w of bloque3">
              <h3>Experiencias con MGF</h3>
                <p *ngIf="w.Exp_propias !=''">Experiencias Propias:
                  <b>{{w.Exp_propias}}</b>
                </p>
                <p *ngIf="w.Exp_terceros !=''">Experiencias de Terceros:
                  <b>{{w.Exp_terceros}}</b>
                </p>
                <p *ngIf= "w.Mant_MGF ==1 || w.Mant_MGF ==0">Matenimiento de la MGF:
                  <b *ngIf="w.Mant_MGF == 1">Sí</b>
                  <b *ngIf="w.Mant_MGF == 0">No</b>
                </p>
                <p *ngIf="w.Mant_MGF_texto != ''">¿Por qué?
                  <b>{{w.Mant_MGF_texto}}</b>
                </p>
              <h3>Conocimiento sobre consecuencias MGF</h3>
                <p *ngIf="w.Conoc_consecM == 0 || w.Conoc_consecM == 1">Sobre la salud de las mujeres:
                  <b *ngIf="w.Conoc_consecM == 1">Sí</b>
                  <b *ngIf="w.Conoc_consecM == 0">No</b>
                </p>
                <p *ngIf="w.Otros_consecM == ''">¿Por qué?
                  <b>{{w.Otros_consecM}}</b>
                </p>
                <p *ngIf="w.Conoc_consecH == 1 || w.Conoc_consecH == 0">Sobre la salud de los hombres:
                  <b *ngIf="w.Conoc_consecH == 1">Sí</b>
                  <b *ngIf="w.Conoc_consecH == 0">No</b>
                </p>
                <p *ngIf="w.Otros_consecH == ''">¿Por qué?
                  <b>{{w.Otros_consecH}}</b>
                </p>
              <h3>Intervención</h3>
              <p *ngIf="w.Formato_int != ''">Formato intervención:
                <b>{{w.Formato_int}}</b>
              </p>
              <p *ngIf="w.Consejo != ''">Consejo para otros profesionales:
                <b>{{w.Consejo}}</b>
              </p>
            </div>
            <div *ngIf="bloque3.length == 0">
              <h3>No hay datos :(</h3>
            </div>
          </div>
          </mat-tab>
          <mat-tab label="Exploracion genital">
            <div class="contentVerExp">
            <div *ngFor="let w of bloque4">
              <h3>Exploración genital</h3>
              <p *ngIf="w.Detec_MGF == 1 || w.Detec_MGF == 0">Detección MGF:
                <b *ngIf="w.Detec_MGF == 1">Sí</b>
                <b *ngIf="w.Detec_MGF == 0">No</b>
              </p>
              <p *ngIf="w.ID_Mutilacion != ''">Tipo de MGF:
                <b>{{w.ID_Mutilacion}}</b>
              </p>
              <p *ngIf="w.Cicatriz_genital == 1 || w.Cicatriz_genital == 0">Cicatrices en la zona genital:
                <b *ngIf="w.Cicatriz_genital == 1">Sí</b>
                <b *ngIf="w.Cicatriz_genital == 0">No</b>
              </p>
              <p *ngIf="w.Cicatriz_genital == 1">Descripción:
                <b>{{w.Descripcion}}</b>
              </p>
              <p *ngIf="w.Elasticidad != ''">Elasticidad:
                <b>{{w.Elasticidad}}</b>
              </p>
              <h3>Posibles consecuencias para la salud</h3>
              <!-- CONSECUENCIAS -->
              <h4>Consecuencias Físicas Inmediatas</h4>
              <div *ngFor="let c of consecSalud1">
                <div>
                  <p>{{c.Nombre}}</p>
                </div>
              </div>
              <div *ngIf="!consecSalud1?.length">
                <p>No hay registros</p>
              </div>
              <h4>Consecuencias Físicas A Largo Plazo</h4>
              <div *ngFor="let c of consecSalud2">
                <div>
                  <p>{{c.Nombre}}</p>
                </div>
              </div>
              <div *ngIf="!consecSalud2?.length">
                <p>No hay registros</p>
              </div>
              <h4>Consecuencias Obstétrico Ginecológicas</h4>
              <div *ngFor="let c of consecSalud4">
                <div>
                  <p>{{c.Nombre}}</p>
                </div>
              </div>
              <div *ngIf="!consecSalud4?.length">
                <p>No hay registros</p>
              </div>
              <h4>Consecuencias Psicosociales</h4>
              <div *ngFor="let c of consecSalud5">
                <div>
                  <p>{{c.Nombre}}</p>
                </div>
              </div>
              <div *ngIf="!consecSalud5?.length">
                <p>No hay registros</p>
              </div>
              <h4>Consecuencias sobre la Sexualidad</h4>
              <div *ngFor="let c of consecSalud6">
                <div>
                  <p>{{c.Nombre}}</p>
                </div>
              </div>
              <div *ngIf="!consecSalud6?.length">
                <p>No hay registros</p>
              </div>
              <h4 *ngIf="w.Otros != ''">Otras</h4>
              <p *ngIf="w.Otros != ''">{{w.Otros}}</p>
              <h3>Intervención</h3>
              <p *ngIf="w.Formato_int != ''">Formato de la intervención:
                <b>{{w.Formato_int}}</b>
              </p>
              <p *ngIf="w.Consejos != ''">Consejos:
                <b>{{w.Consejos}}</b>
              </p>
            </div>
            <div *ngIf="bloque4.length == 0">
              <h3>No hay datos :(</h3>
            </div>
          </div>
          </mat-tab>
          <mat-tab label="Viajes">
            <div class="contentVerExp">
            <div *ngFor="let w of bloque5">
              <h3>Valoración sobre posibles viajes</h3>
              <p *ngIf="w.Viajes == 1 || w.Viajes == 0">Realiza viajes al país de origen en vacaciones:
                <b *ngIf="w.Viajes == 1">Sí</b>
                <b *ngIf="w.Viajes == 0">No</b>
              </p>
              <p *ngIf="w.ViajesPlanificados == 1 || w.ViajesPlanificados == 0">Las personas implicadas en este expediente tiene planificado realizar un viaje proximamente:
                <b *ngIf="w.ViajesPlanificados == 1">Sí</b>
                <b *ngIf="w.ViajesPlanificados == 0">No</b>
              </p>
              <p *ngIf="w.Intervencion != ''">Descripción del formato de la intervención:
                <b>{{w.Intervencion}}</b>
              </p>
              <p *ngIf="w.Consejos != ''">Consejos:
                <b>{{w.Consejos}}</b>
              </p>
            </div>
            <h3>Indicadores de sospecha de MGF en el ambito escolar</h3>
            <div *ngFor="let i of indicadores">
              <p>{{i.Nombre}}</p>
            </div>
            <div *ngIf="!indicadores?.length">
              <p>No hay registros</p>
            </div>
            <div *ngIf="bloque5.length == 0">
              <h3>No hay datos :(</h3>
            </div>
          </div>
          </mat-tab>

        </mat-tab-group>

      </div>

    </div>

  </div>
  <!-- DIV DEL ERROR-->
</div>
<app-footer></app-footer>
