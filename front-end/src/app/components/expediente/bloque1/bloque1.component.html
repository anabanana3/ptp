<!--TODO Revisar como hacer para simplificar la parte del JacaScript

-->

<form [formGroup]="form" (ngSubmit)="guardarDatos()">
<div class="grupoForm">
    <h2 class="cherry">INFORMACIÓN BÁSICA SOBRE EL EXPEDIENTE</h2>
  <div class="divLabels">
    <div class="divExp">
      <label for="titulo">Título</label>
      <span matTooltip="Título que le permita identificar rápidamente este expediente." class="pointer icon-info info"></span>
      <input [(ngModel)]="expediente.Titulo" type="text" name="titulo" id="titulo" formControlName="titulo">
    </div>
    <div class="divExp">
      <label for=fechaC>Fecha de detección del caso:</label>
      <input [(ngModel)]="expediente.Fecha" type="date"  name="fechaC" formControlName="fechaC" id="fechaC" >
    </div>
    <div class="divExp">
      <label for="lugarD">Lugar de detección:</label>
      <input [(ngModel)]="expediente.ID_Lugar" type="text" placeholder="Lugar"  name="lugarD" formControlName="lugarD" id="lugarD" >
    </div>
  </div>

    <div class="divExp">
    <label for="descripcion">Breve descripción:</label>
    <input [(ngModel)]="expediente.Descripcion" type="text"  placeholder="Descripcion"  name="descripcion" id="descripcion" formControlName="descripcion">
  </div>
</div>

<hr>
<h2 class="cherry ">DATOS SOCIODEMOGRÁFICOS</h2>
<div class="grupoForm" formGroupName = "menor">

  <!-- DATOS DE LA MENOR INVOLUCRADA EN EL EXPEDIENTE-->
  <h2 class="text16 textPink">DATOS SOBRE LA MENOR</h2>

  <div class="divExp">
    <label for="nombreM">Nombre completo de la menor:</label>
    <input [(ngModel)]="menor.Nombre" type="text" id="nombreM" placeholder="Nombre de la menor" formControlName="nombre">
  </div>

  <div class="divExp">
    <label class="edad" for="edadM">Edad:</label>
    <input [(ngModel)]="menor.Edad" max="99" type="number" id="edadM" formControlName="edad">
  </div>

  <div class="divExp">
    <label for="etniaM">Etina de origen:</label>
    <select [(ngModel)]="menor.ID_Etnia" id="etniaM" formControlName="etnia">
      <option id="selectOption">Selecciona una etnia de procedencia</option>
      <option *ngFor="let e of etnias" value="{{e.ID_Etnias}}">{{e.Etnia}}</option>
    </select>
  </div>

  <div class="divExp">
    <label  for="lugarN">Lugar de nacimiento:</label>
    <input [(ngModel)]="menor.ID_Lugar" type="text" id="lugarN" name="lugarN" placeholder="Lugar de nacimiento" formControlName="lugarN">
  </div>
</div>
<hr>
<!-- DATOS SOBRE LA MADRE DE LA MENOR INVOLUCRADA EN EL EXPEDIENTE-->

<div class="grupoForm" formGroupName="madre">
  <h2 class="text16 textPink">DATOS SOBRE LA MADRE
    <span *ngIf="HayMadre==false" (click)="HayMadre = !HayMadre" class="pointer icon-plus"></span>
    <span *ngIf="HayMadre==true" (click)="HayMadre = !HayMadre" class="pointer icon-minus"></span>
  </h2>
<div *ngIf="HayMadre==true">
  <div class="divExp">
    <label for="nombreMa">Nombre de la madre</label>
    <input [(ngModel)]="madre.Nombre" required type="text" id="nombreMa" placeholder="Nombre de la madre" formControlName="nombre" >
  </div>

  <div class="divExp">
    <label for="edadMa">Edad</label>
    <input [(ngModel)]="madre.Edad" type="number" id="edadMa" formControlName="edad">
  </div>

  <div class="divExp">
    <label for="etniaMa">Etina de origen</label>
    <select [(ngModel)]="madre.ID_Etnia" id="etniaMa" formControlName="etnia">
      <option>Selecciona una etnia de procedencia</option>
      <option *ngFor="let e of etnias" value="{{e.ID_Etnias}}">{{e.Etnia}}</option>
    </select>
  </div>

  <div class="divExp">
    <label for="lugarNM">Lugar de nacimiento</label>
    <input [(ngModel)]="madre.ID_Lugar" type="text" id="lugarNM" name="lugarNM" placeholder="Lugar de nacimiento" formControlName="lugarN">
  </div>

  <div class="divExp">
    <label for="actividadM">Actividad laboral de la madre</label>
    <select [(ngModel)]="madre.ID_Actividad" id="actividadM" formControlName="actividad">
      <option value="">Desconoce la actividad</option>
      <option *ngFor="let a of actividades" value="{{a.ID_Actividad}}" id="actividadM">{{a.Nombre}}</option>
    </select>

  </div>
</div>
</div>

<hr>
<!-- DATOS SOBRE EL PADRE DE LA MENOR INVOLUCRADA EN EL EXPEDIENTE -->



<div class="grupoForm"  formGroupName="padre">
  <h2 class="text16 textPink">DATOS SOBRE EL PADRE
    <span  *ngIf="HayPadre == false" (click)="HayPadre = !HayPadre" class="icon-plus" style="padding : 3px"></span>
    <span *ngIf="HayPadre == true" (click)="HayPadre = !HayPadre" class="icon-minus" style="padding : 3px"></span>
  </h2>
  <div *ngIf="HayPadre==true">

    <div class="divExp">
      <label for="nombrePa">Nombre del padre</label>
      <input [(ngModel)]="padre.Nombre" required type="text" id="nombrePa" placeholder="Nombre del padre" formControlName="nombre">
    </div>

    <div class="divExp">
      <label for="edadPa">Edad</label>
      <input type="number" id="edadPa" formControlName="edad">
  </div>
  <!--REVISAR PORQUE SE SELECCIONAN LAS DOS OPCIONES -->
    <!-- <div>
      <label>Sexo:</label>
      <label for="mujer3">Mujer</label>
      <input [(ngModel)]="padre.ID_Sexo" type="radio" name="sexo3" value="1" id="mujer3" formControlName="sexo3">
      <label for="hombre3">Hombre</label>
      <input [(ngModel)]="padre.ID_Sexo" type="radio" name="sexo3" value="2" id="hombre3" formControlName="sexo3">
    </div> -->
  <div class="divExp">
      <label for="etniaPa">Etina de origen</label>
      <select [(ngModel)]="padre.ID_Etnia" id="etniaPa" formControlName="etnia">
        <option>Selecciona una etnia de procedencia</option>
        <option *ngFor="let e of etnias" value="{{e.ID_Etnias}}">{{e.Etnia}}</option>
      </select>
  </div>

  <div class="divExp">
      <label for="lugarNP">Lugar de nacimiento</label>
      <input  [(ngModel)]="padre.ID_Lugar" type="text" id="lugarNP" name="lugarNP" placeholder="Lugar de nacimiento" formControlName="lugarN">
  </div>

  <div class="divExp">
      <label for="actividadP">Actividad laboral del padre</label>
      <select [(ngModel)]="padre.ID_Actividad" id="actividadP" formControlName="actividadP" formControlName="actividad">
        <option value="">Desconoce la actividad</option>
        <option *ngFor="let a of actividades" value="{{a.ID_Actividad}}" id="actividadP">{{a.Nombre}}</option>
      </select>

    </div>
    </div>
  </div>


<!--CONTEXTO DE LA CITA -->
<hr>
<div formGroupName="bloque">
<h2 class="cherry">CONTEXTO DE LA CITA</h2>
<div>
  <h2 class="text16 textPink">TIPO DE CITA</h2>
  <div class="divExp">
    <label for="citaAboMGF">Citación por abordaje de riesgo de MGF</label>
    <select id="citaAboMGF" formControlName="Citacion">
      <option *ngFor="let op of opciones; let i = index" value="{{i}}">{{op}}</option>
    </select>
  </div>

  <div class="divExp">
    <label for="deriDetMGF">Derivación por detección de riesgo de MGF</label>
    <select id="deriDetMGF" formControlName="Deriv_Riesgo">
      <option *ngFor="let op of opciones; let i = index" value="{{i}}">{{op}}</option>
    </select>
  </div>

  <div class="divExp">
    <label for="deriSosMGF">Derivación por sospecha de MGF</label>
    <select id="deriSosMGF" formControlName="Deriv_Sospecha">
      <option *ngFor="let op of opciones; let i = index" value="{{i}}">{{op}}</option>
    </select>
  </div>

  <div class="divExp">
    <label for="otrosM">Otros motivos</label>
    <span matTooltip="Campo de texto libre donde puede introducir motivos más concretos sobre la cita" class="pointer icon-info info"></span>
    <input type="text" id="otrosM" name="otros" formControlName="Otros">
  </div>
  </div>
<hr>
<div>
  <h2 class="text16 textPink">PERSONAS DURANTE LA CITA</h2>
  <div class="divExp">
    <label for="acomP">Acompañado/a por el padre</label>
    <select id="acomP" formControlName="Acomp_P">
      <option *ngFor="let op of opciones; let i = index" value="{{i}}">{{op}}</option>
    </select>
  </div>

  <div class="divExp">
    <label for="acomM">Acompañado/a por la madre</label>
    <select id="acomM" formControlName="Acomp_M">
      <option *ngFor="let op of opciones; let i = index" value="{{i}}">{{op}}</option>
    </select>
  </div>

  <div class="divExp">
    <label for="acomH">Acompañado por hermanos/as</label>
    <select id ="acomH" formControlName="Acomp_H">
      <option *ngFor="let op of opciones; let i = index" value="{{i}}">{{op}}</option>
    </select>
  </div>

  <div class="divExp">
    <label for="otrosA">Otros acompañantes</label>
    <input type="text" placeholder="Introduzca otros acompañantes" id="otrosA" formControlName="Acomp_O">
  </div>

</div>
<hr>
<div>
  <h2 class="text16 textPink">DIFICULTAD CON EL IDIOMA</h2>

  <div class="divExp">
    <label for="dificultadM">Dificultad con el idioma materno</label>
    <select id="dificultadM" formControlName="Dif_Idi_M">
      <option *ngFor="let op of opciones; let i = index" value="{{i}}">{{op}}</option>
    </select>
  </div>

  <div class="divExp">
    <label for="traduccion">Precisa traducción</label>
    <select id="traduccion" formControlName="Traduccion">
      <option *ngFor="let op of opciones; let i = index" value="{{i}}">{{op}}</option>
    </select>
  </div>

  <div class="divExp">
    <label for="mediacion">Precisa de mediación intercultural</label>
    <select id="mediacion" formControlName="Mediacion">
      <option *ngFor="let op of opciones; let i = index"value="{{i}}">{{op}}</option>
    </select>
</div>
</div>
</div>
<hr>
<button style="text-align:center;" class="btn-relleno" [disabled]="!this.form.valid" type="submit">Guardar</button>

</form>

<!-- esto es lo que sale : false INVALID
<p>
  {{this.form.valid}}

  {{this.form.status}}
</p>
-->
