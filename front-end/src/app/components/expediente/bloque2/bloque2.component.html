<!-- TODO: Cambiar la funcion a guardarDatos() para que la informacion se
almacene en la base de datos
el metodo de guardarDatos3() es para ver que la informacion se actualiza bien -->
<form (ngSubmit)="guardarDatos(form)"#form="ngForm">
  <div id="alert">{{mensaje}}</div>
  <p class="textGreyDarken">* Si usted pone el ratón sobre la casilla con la "i" podrá encontrar
    recomendaciones sobre posibles preguntas que puede realizarle a la Titular.</p>
    <hr>
  <h2 class="cherry">CONOCIMIENTO E INFORMACIÓN SOBRE LA MGF</h2>
  <div class="divLabels">
    <div class="divExp">
      <label>El titular tiene conocimientos sobre la MGF:</label>
      <span matTooltip='Posible pregunta:"Tengo entendido que en su país se realiza la ablación o el corte de los genitales de las
       mujeres. ¿Conoce esta práctica?."' class="pointer icon-info info"></span>
    </div>

       <!-- <div class="divExp">
         <select [(ngModel)]="bloque2.Conoce_MGF" id="Prueba" name="Conoce_MGF">
           <option *ngFor="let op of opciones; let i = index"[value]="i">{{op}}
         </select>
        <br>
      </div> -->

    <div class="divExp">
      <input class="radiotrans" type="radio"  [(ngModel)]="bloque2.Conoce_MGF" id="Conoce_MGFSI" value="1" name="Conoce_MGF">
      <label class="labeltransr"  for="Conoce_MGFSI">Sí</label>
      <input class="radiotrans"  type="radio" [(ngModel)]="bloque2.Conoce_MGF" id="Conoce_MGFNO" value="0" name="Conoce_MGF">
      <label class="labeltransr" for="Conoce_MGFNO">No</label>
      <input class="radiotrans"  type="radio" [(ngModel)]="bloque2.Conoce_MGF" id="Conoce_MGFNS" value="2" name="Conoce_MGF">
      <label class="labeltransr" for="Conoce_MGFNS">N/S</label>
    </div>

    <div class="divExp">
     <label>La MGF se realiza en la comunidad de origen:</label>
    </div>

     <div class="divExp">
       <input class="radiotrans" type="radio"  [(ngModel)]="bloque2.MGF_realizada_com_origen" id="Realizada_MGFSI" value="1" name="Realizada_MGFSI">
       <label class="labeltransr" for="Realizada_MGFSI">Sí</label>
       <input class="radiotrans"type="radio"  [(ngModel)]="bloque2.MGF_realizada_com_origen" id="Realizada_MGFNO" value="0" name="Realizada_MGFNO">
       <label class="labeltransr"for="Realizada_MGFNO">No</label>
       <input class="radiotrans"  type="radio" [(ngModel)]="bloque2.MGF_realizada_com_origen" id="Realizada_MGFNS" value="2" name="Realizada_MGFNS">
       <label class="labeltransr" for="Realizada_MGFNS">N/S</label>
     </div>
    </div>

    <div class="divLabels">
      <div class="divExp">
         <label>Posicionamiento del padre frente a la MGF:</label>
         <span matTooltip="¿Usted está de acuerdo con esta práctica? ¿Y su marido, y su
         esposa, y su pareja? ¿Qué opina su familia sobre la ablación?" class="pointer icon-info info"></span>
      </div>
      <div class="divExp">
        <!-- <select [(ngModel)]="bloque2.Pos_padre" name="Pos_padre">
         <option *ngFor="let op of opciones2; let i = index"[value]="i">{{op}}
        </select> -->
        <input class="radiotrans" type="radio"  [(ngModel)]="bloque2.Pos_padre" id="Padre_MGFFavor" value="1" name="Padre_MGFFavor">
        <label class="labeltransr" for="Padre_MGFFavor">A favor</label>
        <input class="radiotrans" type="radio"  [(ngModel)]="bloque2.Pos_padre" id="Padre_MGFContra" value="0" name="Padre_MGFContra">
        <label class="labeltransr" for="Padre_MGFContra">En contra</label>
        <input class="radiotrans"  type="radio" [(ngModel)]="bloque2.Pos_padre" id="Padre_MGFNS" value="2" name="Padre_MGFNS">
        <label class="labeltransr" for="Padre_MGFNS">N/S</label>
      </div>

      <div class="divExp">
       <label>Posicionamiento de la madre frente a la MGF:</label>
     </div>
     <div class="divExp">
       <!-- <select [(ngModel)]="bloque2.Pos_madre" name="Pos_madre">
         <option *ngFor="let op of opciones2; let i = index"[value]="i">{{op}}
       </select> -->
       <input class="radiotrans" type="radio"  [(ngModel)]="bloque2.Pos_madre" id="Madre_MGFFavor" value="1" name="Madre_MGFFavor">
       <label class="labeltransr" for="Madre_MGFFavor">A favor</label>
       <input class="radiotrans" type="radio"  [(ngModel)]="bloque2.Pos_madre" id="Madre_MGFContra" value="0" name="Madre_MGFContra">
       <label class="labeltransr" for="Madre_MGFContra">En contra</label>
       <input class="radiotrans"  type="radio" [(ngModel)]="bloque2.Pos_madre" id="Madre_MGFNS" value="2" name="Madre_MGFNS">
       <label class="labeltransr" for="Madre_MGFNS">N/S</label>
      </div>
    </div>

    <div class="divLabelsDeUno">
      <div class="divExpDeUno">
        <label>Posicionamiento de la familia en el país de origen:</label>
      </div>

     <div class="divExpDeUno">
       <!-- <select [(ngModel)]="bloque2.Pos_familia" name="Pos_familia">
         <option *ngFor="let op of opciones2; let i = index"[value]="i">{{op}}
       </select> -->
       <input class="radiotrans" type="radio"  [(ngModel)]="bloque2.Pos_familia" id="Familia_MGFFavor" value="1" name="Familia_MGFFavor">
       <label class="labeltransr" for="Familia_MGFFavor">A favor</label>
       <input class="radiotrans" type="radio"  [(ngModel)]="bloque2.Pos_familia" id="Familia_MGFContra" value="0" name="Familia_MGFContra">
       <label class="labeltransr" for="Familia_MGFContra">En contra</label>
       <input class="radiotrans"  type="radio" [(ngModel)]="bloque2.Pos_familia" id="Familia_MGFNS" value="2" name="Familia_MGFNS">
       <label class="labeltransr" for="Familia_MGFNS">N/S</label>
     </div>
    </div>

    <label>Otros aspectos a tener en cuenta sobre el posicionamiento de la familia:</label>
    <textarea class="textareaBl2" [(ngModel)]="bloque2.Otros" name="Otros" placeholder="Escriba aquí..."></textarea>

    <label>Significado de la MGF para la titular del expediente:</label>
    <textarea class="textareaBl2" [(ngModel)]="bloque2.Significado_MGF" name="Significado_MGF" placeholder="Escriba aquí..."></textarea>

<!-- TODO: WHAAT? -->
    <label>Formato de intervención:</label>
    <span matTooltip="Indique cuál ha sido el formato de intervención frente a las personas implicadas en el expediente" class="pointer icon-info info"></span>
    <textarea class="textareaBl2" [(ngModel)]="bloque2.Formato_intervencion" name="Formato_intervencion" placeholder="Escriba aquí..."></textarea>

    <label>Consejos para otros profesionales:</label>
    <span matTooltip="Estos consejos podrán ayudar a otros profesionales pertenecientes a Aisha en caso de que publique este expediente." class="pointer icon-info info"></span>
    <textarea class="textareaBl2" [(ngModel)]="bloque2.Consejos" name="Consejos" placeholder="Escriba aquí..."></textarea>
    <!-- <hr> -->

    <div class="grupoForm">
      <h2 class="text16 textPink">HISTORIA DE PARTOS
        <span *ngIf="hayParto==false" (click)="hayParto =!hayParto" class="pointer icon-plus"></span>
        <span *ngIf="hayParto==true" (click)="hayParto =!hayParto" class="pointer icon-minus"></span>
      </h2>
      <div *ngIf="hayParto==true">
        <label>Número de partos de los que desea guardar información:</label>
        <input class="sizeinput" id="numPartos" name=Num_Partos type="number" min="1" #Npartos>
        <br>
        <button mat-raised-button (click)="openDialog(Npartos.value)" type="button" name="button" class="btn-border bgColorPink">Añadir partos</button>
        <button *ngIf="datosPartos.length>=1" mat-raised-button (click)="modificarPartos()"  type="button" name="button" class="btn-border bgColorPink">Modificar partos</button>

 <!-- <div class="partos">
   <div class="partoContainer" *ngFor="let p of partos; let i= index">
     <p> parto numero {{i+1}}</p>
     <label>Edad de la madre en el momento del parto </label>
     <input [(ngModel)]="datosPartos[i].Edad_Madre"  name="Edad_Madre" type="number">
     <br>
     <label>Fecha del parto</label>
     <input type="date">
     <br> -->
     <!--Este valor lo voy a calcular en funcion de la fecha que introduzca el usuario-->
     <!-- <label>Edad del nacido(Ver si lo podemos hacer automatico)</label>
     <input [(ngModel)]="datosPartos[i].Edad_Nacido" name="Edad_Nacido" type="number">
     <br>
     <label> Tiempo expulsivo</label>
     <input [(ngModel)]="datosPartos[i].Tiempo_Expulsivo" name="Tiempo_Expulsivo" type="number">
     <br>
     <label> Tiempo de dialtación</label>
     <input [(ngModel)]="datosPartos[i].Tiempo_Dilatacion" name="Tiempo_Dilatacion" type="number">
     <br>
     <label> Duración del parto</label>
     <input [(ngModel)]="datosPartos[i].Duracion_Parto" name="Duracion_Parto" type="number">
     <br>
     <label>Formula obstretica realizada</label>
     <select [(ngModel)]="datosPartos[i].ID_Formula" name="ID_Formula">
       <option *ngFor="let f of formulas" [value]="f.ID_Formula">{{f.Nombre}}</option>
     </select>
   <br>
   <label>Test APGAR</label>
   <input [(ngModel)]="datosPartos[i].Test_APGAR" name="Test_APGAR" type="number">
   <br>
   <label>Tipo de mutilación que padece la madre en el momento del parto</label>
   <select [(ngModel)]="datosPartos[i].ID_Mutilacion" name="ID_Mutilacion">
       <option *ngFor="let t of tiposMutilacion" [value]="t.ID_Mutilacion">{{t.Nombre}} {{t.Tipo}}</option>
   </select>
   <br>

   <p>Seleccione las complicaciones sufrió la madre durante el parto</p>
   <span matTooltip="Seleccione todas las complicaciones que sufra la madre ddurante el parto. Puede selecionar más de una" class="pointer icon-info info"></span>
   <div *ngFor="let c of compMadre; let k = index">
     <label for="{{i}}compMadre{{k}}">{{c.Nombre}}</label> -->
     <!-- [(ngModel)]="datosPartos[i].compMadre" -->
     <!-- <input id="{{i}}compMadre{{k}}" [(ngModel)]="datosPartos[i].CompMadre[k]" name="{{i}}compMadre{{k}}" value="c.ID_Complicacion" type="checkbox">
   </div>
   <br><br>
   <p>Seleccione las complicaciones sufrió el recien nacido durante el parto</p>
   <span matTooltip="Seleccione todas las complicaciones que sufrioel recien nacido durante el parto. Puede selecionar más de una" class="pointer icon-info info"></span>
   <div *ngFor="let c of compNacido let j= index">
     <label for="{{i}}compNacido{{j}}">{{c.Nombre}}</label>
     <input id="{{i}}compNacido{{j}}" [(ngModel)]="datosPartos[i].compNacido[j]" name="{{i}}compNacido{{j}}" type="checkbox">
   </div>
 </div>

 </div> -->


     </div>
   </div>
   <hr>
   <div class="centrar">
    <button class="btn-relleno" type="submit">Guardar</button>
  </div>
</form>

 <!-- esto es lo que sale : false INVALID
 <p>
   {{this.form.valid}}

   {{this.form.status}}
 </p>-->
