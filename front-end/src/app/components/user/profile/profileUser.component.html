<div *ngIf="error">
  <app-error></app-error>
</div>
<div *ngIf="!error">
  <button [routerLink]="['/home']"type="button" name="button" class="btn-return textoBlanco icon-return">
  </button>
  <div class="editarPerfil divBlanco bgColorWhite">

    <img src="https://aisha.ovh{{user.Foto}}" class="fotoPerfil" alt="imagen perfil">
    <hr>
    <a name="arriba"></a>
    <div id="alert">{{mensaje}}</div>
  <!-- Permisos -->
    <div class="permisos" style="width: 35%; float:left; margin-left:5%; display: inline-grid; margin-top: 5%;">
      <div class="headerPermisos">
        <p class="textoBlanco">Permisos</p>
      </div>
      <div class="" style="margin-top: 5%;">
        <label style="float:left; width:80%;" for="subir">Subir expedientes</label>
          <input class="inputProfileUser" type="checkbox" name="" value="" id="subir">
      </div>
      <div class="">
        <label style="float:left; width:80%;" for="comentar">Comentar expedientes</label>
          <input class="inputProfileUser" type="checkbox" name="" value="" id="comentar">
      </div>
      <div class="">
        <label style="float:left; width:80%;" for="api">Ver API</label>
          <input class="inputProfileUser" type="checkbox" name="" value="" id="api">
      </div>

      <button type="button" name="button" class="btn-border" style="margin:5%;">Solicitar</button>
    </div>

    <div style="width: 50%; float: left;margin-left: 5%;">
      <!-- TODO: La función buena es save -->
      <form (ngSubmit)="save2(forma)" #forma="ngForm" style="display: inline-grid; width: 80%;">

        <!-- [(ngModel)]="" -->
        <label for="nombre">Nombre</label>
          <input [(ngModel)]="user.Nombre" class="lineaCampo" type="text"
                 value="user[0].Nombre" name="nombre" id="nombre" required>
        <label for="apellido">Apellidos</label>
          <input [(ngModel)]="user.Apellidos" class="lineaCampo" type="text"
                 value="user[0].Apellidos" name="apellido" id="apellido" required>
        <label for="apellido">Email</label>
          <input [(ngModel)]="user.Email" class="lineaCampo" type="text"
                 value="user[0].Email" name="email" id="email" disabled="false">
         <label for="nacimiento">Fecha de Nacimiento</label>
           <input [(ngModel)]="user.F_Nacimiento" class="lineaCampo" type="date"
                  value="user[0].F_Nacimiento" name="nacimiento" id="nacimiento" required>
        <label for="sexo">Sexo</label>
        <div class="radioButtons">
          <input [(ngModel)]="user.Sexo" type="radio" name="Sexo" value="1" id="mujer">
            <label for="mujer">Mujer</label>
          <input [(ngModel)]="user.Sexo" type="radio" name="Sexo" value="2" id="hombre">
            <label for="hombre">Hombre</label>
          <input [(ngModel)]="user.Sexo" type="radio" name="Sexo" value="3" id="otro">
            <label for="otro">Prefiero no especificar</label>
        </div>
        <label for="dni">DNI</label>
          <input [(ngModel)]="user.DNI" class="lineaCampo" type="text"
                 value="user[0].DNI" name="dni" id="dni" required>
       <label for="asociacion">Asociacion</label>
          <input [(ngModel)]="user.Asociacion" class="lineaCampo" type="text"
                value="user[0].Asociacion" name="asociacion" id="asociacion" disabled="false" required>
        <label for="profesion">Profesion</label>
        <select [(ngModel)]="user.ID_Profesion" class="lineaCampo" name="Profesion" id="profesion">
          <option *ngFor="let k of profesiones | keys;" value="{{profesiones[k].ID_Profesion}}">
            {{profesiones[k].Nombre}}
          </option>
        </select>
       <label for="direccion">Dirección</label>
         <input [(ngModel)]="user.Direccion" class="lineaCampo" type="text"
                value="user[0].Direccion" name="direccion" id="direccion" required>

        <label for="fotoP">Foto de perfil</label>
        <input class="lineaCampo" name="fotoP" id="fotoP" type="file"  (change)="onFileChange($event)" #fileInput>

        <button (click)="change = !change" type="button" name="button"
                class="btn-border" style="margin-bottom:5%;">
                Cambiar Contraseña
        </button>

        <div *ngIf="change" style="display: inline-grid;">
          <label for="contra">Contraseña *</label>
          <!-- (keyup)="validate(pass.newpass)" -->
          <input  [(ngModel)]="pass.newpass" class="lineaCampo" type="password" name="contra" id="contra" required>
          <label for="repeatcontra">Repita la Contraseña *</label>
            <input  [(ngModel)]="pass.repeatpass" class="lineaCampo" type="password" name="repeatcontra" id="repeatcontra" required>
<!-- (keyup)="validate(pas.repeatpass)" -->
          <div class="progress">
            <div id="value" style="background-color:black;"></div>
          </div>
        </div>
        <div>
          <button [routerLink]="['/home']" type="button" name="button" class="btn-relleno-negro">Atrás</button>
          <button type="submit" name="button" class="btn-relleno" [disabled]="!this.forma.valid">GUARDAR</button>
        </div>
    </form>

    </div>
    {{forma.valid}}

  </div>
</div>
