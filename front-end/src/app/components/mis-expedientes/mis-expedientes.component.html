<div *ngIf="error">
  <app-error></app-error>
</div>
<div *ngIf="!error">
  <app-header></app-header>
  <button [routerLink]="['/home']"type="button" name="button" class="btn-return textoBlanco icon-return">
  </button>

<div *ngIf="expedientes.length > 0" style="margin:2%">
  <button class="btn-fill text12 textPink" [routerLink]="['/expediente']">Nuevo Expediente</button>
</div>

<div class="optionsExp">
  <div class="optionsLeft">
    <p id="fecha">Fecha | </p>
    <p id="alfa"> A-Z |</p>
    <p id="alfa"> Z-A</p>
  </div>
  <div class="optionsRigth" >
      <p (click)="cambio(1)" id="priv"> Privados </p>
      <p>  | </p>
      <p (click)="cambio(2)" id=publ> Publicos</p>
      <p (click)="cambio(3)" id="todos"> | Todos </p>
    </div>
</div>

<!-- TODO Formulario con todos los criterios de busqueda -->
  <div class="searchBar">
    <form (ngSubmit)="buscar(1,10)">
      <label for="titulo">Titulo</label>
      <input [(ngModel)]="Filtros.Titulo" type="text" name="Titulo" id="titulo">

      <label for="f1">Desde</label>
      <input [(ngModel)]="Filtros.Fecha1" type="date" id="f1" name="Fecha1">
      <label for="f2">Hasta</label>
      <input [(ngModel)]="Filtros.Fecha2" type="date" id="f2" name="Fecha2">

      <label for="lugar"> Lugar de detección </label>
      <input [(ngModel)]="Filtros.Lugar" type="text" id="lugar" name="Lugar">

      <label for="etnia">Etnia de origen</label>
      <select [(ngModel)]="Filtros.Etnia" name="Etnia">
        <option value="0">Seleccione la etnia</option>
        <option *ngFor="let e of etnias" [value]="e.ID_Etnias">{{e.Etnia}}</option>
      </select>

      <label for="tipoMGF">Tipo de MGF</label>
      <select [(ngModel)]="Filtros.TipoMGF" name="TipoMGF">
        <option value="0">Seleccione el tipo de MGF</option>
        <option *ngFor="let t of tiposMGF" [value]="t.ID_Mutilacion">{{t.Nombre}} {{t.Tipo}}</option>
      </select>

      <button class="btn-relleno" type="submit" name="button">Buscar</button>

    </form>

  </div>



<!-- Mensaje de que no hay resultados de busqueda -->
<div *ngIf="busqueda==true" id="alert">{{mensaje}}</div>
<div *ngIf="expedientes.length>0" class="expediente-container">
  <div  *ngFor="let e of expedientes" class=expediente>
    <div class="expedienteDesc">
      <img class="imgExp" src="/assets/img/folder.png" alt="Logo expediente">
      <p>{{e.Descripcion.split("'")[1]}}</p>
    </div>
    <div class="expediente-body">
      <p>{{e.Titulo}}</p>
      <!-- split('T')[0] -->
      <p>{{e.Fecha}}</p>
      <button class="btn-border" style="margin-top:5%" [routerLink]="['/verexpediente', {id:e.ID_Expediente}]"> Ver más</button>
    </div>
  </div>
</div>


<!-- TODO: hacer mas condiciones por si no hay expedientes publicos -->
<div *ngIf="expedientes.length ==0 && busqueda==false" class="expediente-container">
  <p> Todavia no tienes almacenado ningún expediente {{paginas.length}}
    <button class="btn-relleno" [routerLink]="['/expediente']">Nuevo Expediente</button>
  </p>
</div>

<ul class="pagination" *ngIf="paginas.length >1 && expedientes.length ">
<!--Boton de pagina anterior-->
  <li>
    <a (click)="pasarPagina(pagBack)">
      <span aria-hidden="true">&laquo;</span>
    </a>
  </li>
  <li *ngFor="let pag of paginas; let i=index">
    <a (click)="pasarPagina(i+1)">
      <span *ngIf="(i+1)==pagActual" class="active">{{i+1}}</span>
      <span *ngIf="(i+1)!=pagActual" >{{i+1}}</span>
    </a>
  </li>
  <!--Boton de pagina siguiente-->
  <li>
    <a (click)="pasarPagina(pagNext);">
      <span aria-hidden="true">&raquo;</span>
    </a>
  </li>
</ul>

</div>
<app-footer></app-footer>
